\def \currentAuthor {Kevin Glatz} %so kann jederzeit der Autor geändert werden -> wird in der Fusszeile angezeigt.

\chapter*{Einleitende Bemerkungen}

An dieser Stelle möchten wir vor allem unseren Projektbetreuern für die gute Kooperation bedanken. Dank geltet auch der Universität Innsbruck, die dieses Projekt in Auftrag gegeben und diese Arbeit ermöglicht hat

\chapter{Einleitung}

Das Projekt entstand als der biologische Bereich der Universität Innsbruck das Thema Entomophagie behandelte. Entomophagie beschreibt den menschlichen Konsum von Insekten, eine Tätigkeit die im asiatischen Raum gängig ist. Das Ziel von diesem Projekt ist es aufzuzeigen wie simpel und ressourcenschonend die Zucht von Insekten in einem künstlichen automatisierten Lebensraum ist.

\subsubsection{Vorteile}

Massentierhaltung und riesige Monokulturen zerstören das natürliche Ökosystem der Erde, das Problem wird nicht vereinfacht indem die gesamte Bevölkerung jährlich steigt. Insekten sind nicht nur eine nahrhafte Möglichkeit diese Nachfrage zu erfüllen, sondern sind auch weniger schadhaft für den Planeten.

Ein weiterer Vorteil besteht auch darin das jeder Insekten bei sich daheim züchten kann  und dabei auch vergleichsweise kostengünstig bei der Anschaffung bleibt.


\chapter{Projektmanagement}

\section{Metainformationen}
\subsection{Team}
Unser Team bestand ursprünglich aus 4 Personen. Da ein Schüler sich ungeplant vom Team entfernt hat, daher umfasst das Projektteam 3 Schüler. Projektleiter Leonid Hammer sowie die Gruppenmitglieder Florian Tipotsch und  Kevin Glatz.

\subsection{Betreuer}
Die Lehrpersonen Stefan Stolz, MSc und Mag. Nina Margreiter erklärten sich bereit diese Projekt zu betreuen. Herr Professor Stolz betreute den technischen Teil der Arbeit und Frau Professor Margreiter den betriebswirtschaftlichen Bereich.

\subsection{Partner}
Der Projektpartner ist die technische Universität Innsbruck. Das Projekt umfangt die Erstellung eines Prototypen für einen automatisierten Insektenbrutkasten.

\subsection{Ansprechpartner}
Die Ansprechpartner zu diesem Projekt waren selbstverständlich unsere Projektbetreuer sowie ao. Univ.-Prof. Thorsten Schwerte.

\section{Vorerhebungen}
\subsection{Projektzieleplan}

\begin{figure}
	\includegraphics[height=10cm]{figures/Zielhierachie}
	\caption{Zielplan Hierarchie}
\end{figure}

\subsection{Projektumfeld}
\begin{itemize}
	\item Identifikation der Stakeholder
	\item Charakterisierung der Stakeholder
	\item Maßnahmen
	\item Grafische Darstellung des Umfeldes
\end{itemize}
\subsection{Risikoanalyse}
\begin{itemize}
	\item Risikomatrix
\end{itemize}

\section{Planung}
\subsection{Projektstrukturplan}
\def \currentAuthor{Florian Tipotsch}
\newpage
\begin{table}[H]
	\centering
	\caption{Projektstrukturplan}
	\label{projektstrukturplan}
	\begin{tabular}{lll}
		P 1   & Projektstart                     &                                \\
		1     & Planung                          & Alle                           \\
		1.1   & Besprechungstermine setzen       & Alle                           \\
		1.1.1 & Vertrag erstellen                & Alle                           \\
		1.2   & Verantwortungsmatrix             & Alle                           \\
		1.3   & Budgetplan erstellen             & Alle                           \\
		2     & Programmierung (Kevin + Flo)     & Kevin Glatz, Florian Tiptsch   \\
		2.1   & Programmiersprache               & Kevin Glatz                    \\
		2.1.1 & Sprache Wählen Š                 & Kevin Glatz                    \\
		2.1.2 & Informationsammlung für Features & Kevin Glatz                    \\
		2.1.3 & Vertraut machen                  & Kevin Glatz                    \\
		2.2   & Arduino UNO kaufen (Flo)         & Florian Tipotsch               \\
		2.2.1 & Vertraut machen                  & Kevin Glatz                    \\
		2.2.2 & Test Programme                   & Kevin Glatz                    \\
		2.3   & Programmierung des Brutkasten    & Kevin Glatz                    \\
		3     & Brutkasten (Leo)                 & Leonid Hammer                  \\
		3.1   & Equipment Liste erstellen        & Leonid Hammer                  \\
		3.1.1 & Equipment überprüfen             & Leonid Hammer                  \\
		3.1.2 & Equipment Kaufen                 & Alle                           \\
		3.2   & Konzeptzeichnung                 & Leonid Hammer                  \\
		3.2.1 & Zeichnen                         & Leonid Hammer                  \\
		3.2.2 & Bauen                            & Leonid Hammer                  \\
		
		4     & Datenbank                        & Kevin Glatz                    \\
		4.1   & ER-Diagramm                      & Florian Tipotsch + Kevin Glatz \\
		4.2   & Sprache Wählen                   & Florian Tipotsch               \\
		4.3   & HTML Seite mit Daten             & Florian Tipotsch               \\
		5     & Nachforschung (Leo)              & Leonid Hammer                  \\
		5.1   & Welches Tier                     & Leonid Hammer                  \\
		5.2   & Wie viele                        & Leonid Hammer                  \\
		5.3   & Futter                           & Leonid Hammer                  \\
		6     & Webapp                           & Florian Tipotsch               \\
		6.1   & Prototyp                         & Florian Tipotsch               \\
		6.2   & Login am Server                  & Florian Tipotsch               \\
		6.3   & Registrierung Zuchkammer         & Florian Tipotsch              
	\end{tabular}
\end{table}

\subsection{Meilensteine}

\begin{table}[H]
	\caption{Meilensteine}
	\label{meilensteine}
	\begin{tabular}{lll}
		1   & Planung                      & Alle                         \\
		2   & Programmierung & Kevin Glatz, Florian Tiptsch \\
		3   & Brutkasten             & Leonid Hammer                \\
		4   & Datenbank                    & Kevin Glatz                  \\
		5   & Nachforschung           & Leonid Hammer                \\
		6   & Webapp                       & Florian Tipotsch            
	\end{tabular}
\end{table}

\subsection{Gant-Chart}
  
\begin{figure} 
\hspace*{-2cm}
\includegraphics[width=530pt]{figures/Gant}
\caption{Unser Gant Chart für das Projekt} 
\end{figure}
\subsection{Abnahmekriterien}
Die Abnahmekriterien wurden von unserem Auftraggeber so gesetzt das es einen Prototypen geben soll welcher Daten auslesen kann und darauf reagiert.
\subsection{Pläne zur Evaluierung}
Zuerst wollen wird die Daten auf unserem Arduino auslesen und diese dann mithilfe eines Wlan Modul es an unsere Website senden.


\chapter{Brutkasten}
 Hier werden wir uns dem Aufbau, der Planung und  Ausführung des Brutkastens widmen. 
\section{Equipment Liste}
<<<<<<< HEAD
=======
\begin{itemize}
	\item Technisches Equipment
	\begin{itemize}
		\item Arduino
		\item 
		\item 
		\item 
		\item 
		\item 
	\end{itemize}
	\item
	\item
	\item
	\item
	\item
\end{itemize}
>>>>>>> e8789ee381fee91b0f79c6ec71ee475cf6d9f17d

\section{Überprüfen des Equipments}

\section{Equipment Kaufen}
\section{Konzeptzeichnung}
\section{Zeichnen}
\section{Bauen}


\chapter{Eingesetzte Technologien} \label{sec:tech}
\begin{itemize}
	\item Kurzbeschreibung aller Technologien, die verwendet wurden.
	\item Technologien die aus dem Unterricht bekannt sind, nur nennen und deren  Einsatzzweck im Projekt beschreiben, nicht die Technologien selbst.
	\item Technologien die aus dem Unterricht nicht bekannt sind, im Detail beschreiben incl. deren Einsatz im Projekt
	\item Fokus aus eingesetzten Frameworks
\end{itemize}

\input{inp_tech.tex}

\chapter{Systementwurf}

\section{Architektur}
\def \currentAuthor{Florian Tipotsch}
\subsection{Design der Komponenten}

Unsere Webapp ist in Yii2 programmiert und ist deshalb nach dem MVC Muster aufgebaut.
\subsection{MVC - Model, View, Controller}\label{sec:MVC}

\subsubsection{Was ist MVC?} 
MVC, auch Model, View, Controller ist ein modernes Entwurfsmuster das meist für Anwendungen die ein User Interface beinhalten, eingesetzt wird. Zum Beispiel für PHP, JAVA, C\# und Ruby Anwendungen. \cite{MVC}

\subsubsection{Vor- und Nachteile}
\begin{tabular}{ l r }
	Vorteile & Nachteile \\
	Gleichzeitiges Programmieren & Schlechte Übersicht \\
	Hohe Kohäsion \cite{kohaesion} & Konsistente Programmierung notwendig\\
	Lose Kopplung \cite{kopplung} & Steile Lernkurve \\	
\end{tabular}

Das MVC Entwurfsmuster ist sehr weit verbreitet und hoch angesehen, es wird deshalb in den meisten Anwendungen mit User Interface angewandt. Der Grund für die Verwendung dieses Musters sind die Vielen Vorteile die es bietet. Außerdem können viel Nachteile über Frameworks behoben werden.

\subsubsection{Aufbau von MVC}
Im Grunde arbeitet MVC mit 3 Klassen:
\begin{itemize}
	\item Modell
	\item View
	\item Controller
\end{itemize}
Die Unterschiedlichen Klassen haben unterschiedliche Aufgaben.

\subsubsection{View}
Die View Klasse ist nur zum Anzeigen der einzelnen Teile des User Interfaces verantwortlich. Bei Webseiten zum Beispiel die Index Seite oder das Login Formular. Außerdem nimmt es alle Benutzer/innen Eingaben entgegen.
\subsubsection{Controller}
Die Controller Klasse Steuert die ganze Anwendung, sie nimmt die User eingaben von der View Klasse entgegen und verarbeitet diese. Außerdem ändert sie auch die View Klasse um andere Seiten anzuzeigen. Sie nimmt auch die Daten von der Modell Klasse entgegen, verarbeitet diese und gibt sie an die View Klasse weiter.
\subsubsection{Modell}
Die Modell Klasse enthält die darzustellenden Daten, sie ist unabhängig von der View und der Controller Klasse

\subsection{CRUD - Create, Read, Update, Delete} \label{sec:CRUD}

\subsubsection{Was ist CRUD?}
CRUD sind die 4 grundlegenden Aufgaben einer Datenbankanbindung:
\begin{itemize}
	\item Create - Erstellen neuer Datensätze
	\item Read - Auslesen der Datensätze
	\item Update - Aktualisieren von vorhandenen Datensätze
	\item Delete - Löschen von Datensätzen
\end{itemize}
\cite{CRUD}
\newline
CRUD ist für alle Datenbankzugriffe verantwortlich die gemacht werden.


\subsection{Yii2} \label{sec:YII2}

\subsubsection{Was ist Yii}
Yii ist ein high Performance PHP Framework welches vor allem für die Entwicklung im Web2.0 eingesetzt wird. Web 2.0 fördert das User aktiv im Web mitmachen. Diese können eigene Beiträge erstellen und diese auf der Website anzeigen lassen.\cite{Web_2}

\subsubsection{Gii} \label{sec:gii}
Gii ist der Yii eigene Model, Crud, Controller, Form, Module und Extension Generator. Mit ihm kann man sehr einfach eine Model Klasse mit einer Unterliegenden Datenbanktabelle erstellen. Aus dieser Model klasse kann man dann wiederum CRUD befehle erzeugen. Mit Gii kann man die gesamte Grund MVC Struktur für Yii2 erzeugen und im weiterm Verlauf dann nach eigenen Wünschen verändern.

\subsubsection{Vor- und Nachteile}
Yii hat sehr viele Vorteile, allerdings auch einig Nachteile:
Vorteile sind:

\begin{itemize}
	\item CRUD-Creator (\nameref{sec:gii})
	\item Model Generator (\nameref{sec:gii})
	\item Einfache Implementierung von HTML Formulare
	\item Einfach Datenbankzugriffe
\end{itemize}

Nachteile ist der Hohe Setup aufwand und die benötigte Kenntnisse in PHP und SQL, welche allerdings bei fast allen Frameworks von Nöten sind.


\subsection{Benutzerschnittstellen} 

Die Benutzerschnittstelle unseres Brutkasten besteht hauptsächlich über die Webapp. Dort kann man sich anmelden und die Daten für den eigenen Brutkasten auslesen. Um sicherzugehen das man nur die eigenen Daten sieht, muss man sich auf der Website mit der Seriennummer die man beim Kauf eines Kasten erhält registrieren. Dadurch kann man dann auf die Daten zugreifen welche für die jeweilige Seriennummer gespeichert sind.
\newline
Wenn man noch nicht registriert wird kann man auf der Website einen Link zu unserem Webshop sehen, den wir allerdings nicht in diesem Projekt erstellen werden da es den Rahmen dieses Projektes Sprengen würde.
\subsection{Datenhaltunskonzept}
Hier ist unser ER-Diagramm
	\begin{figure}
	\includegraphics[height=1000pt]{figures/ERDiagramm}
	\caption{ERDiagramm unserer Datenbank}
	\end{figure}
	\newline
	Die Datenbank werden wir bei unserem Web Hoster anlegen und dort alle Daten bis zu 7 Tage Speichern. Daten sollen alle 5-10 Minuten von unserem Brutkasten übermittelt werden. Zur Übermittlung werden wir ein WLAN Modul an unserem Brutkasten anbringen. Mehr dazu im Kapitel \nameref{sec:daten}. Für Prototyp Zwecken werden wir die Daten vorerst lokal über PHPMyAdmin speichern.
	\newpage
	\def \currentAuthor{}
\subsection{Konzept für Ausnahmebehandlung}
\begin{itemize}
	\item Systemweite Festlegung, wie mit Exceptions umgegangen wird
	\item Exceptions sind primär aus den Bereichen UI, Persistenz, Workflow-Management
\end{itemize}
	\newpage
	\def \currentAuthor{Florian Tipotsch}
\subsection{Sicherheitskonzept}

Auf unsere Website kann man sich mithilfe von Username und Password anmelden. Im Weiteren verlauf des Projektes besteht noch die Möglichkeit für unsere Rest Schnittelle eine Authentifizierung einzubauen. Da unser Prototyp allerdings nur lokal vorhanden ist ist dies zum jetzigen Zeitpunk noch nicht notwendig.

\subsection{Design der Testumgebung}
Unseren Protoyp testen wird indem wir ihn einen Tag autonom laufen lassen und am Ende dieser 24h Periode alle Daten kontrollieren ob diese Sinn machen und der Realität entsprechen. Um dies zu gewährleisten bräuchten wir allerdings einen Klima Regulierten Raum der Co2 messen kann.

\subsection{Desing der Ausführungsumgebung}
Das Endprodukt sollte im Freien autonom funktionieren können. Das Setup für den Endbenutzer/in besteht aus dem anstecken an eine Stromversorgung und dem Verbinden mit dem Internet, sowie das einsetzen der Insekten. Im weiteren Verlauf der Brutzeit muss der Benutzer/ die Benutzerin die Insekten füttern. Unser Produkt übernimmt das Regulieren der Temperatur sowie Co2 Werten damit die Insekten Überleben können.

\section{Detailentwurf}
USE-Cases
Klassendiagramme vom Domain-Klassendiagramm ableiten (incl. detaillierter Darstellung und Verwendung von Vererbungshierarchichen, abstrakten Klassen, Interfaces)
\begin{itemize}
	\item Sequenzdiagramme vom System-Sequenz-Diagramm ableiten
	\item Aktivitätsdiagramme
	\item Detaillierte Zustandsdiagramme für wichtige Klassen
\end{itemize}

Verwendung von CRC-Cards (Class, Responsibilities, Collaboration) für die Klassen
\begin{itemize}
	\item um Verantwortlichkeiten und Zusammenarbeit zwischen Klassen zu definieren und
	\item um auf den Entwurf der Geschäftslogik zu fokussieren
\end{itemize}

Design-Klassen für jeden einzelnen USE-Case können z.B. sein:

\begin{itemize}
	\item UI-Klassen
	\item Data-Access-Klassen
	\item Entity-Klassen (Domain-Klassen)
	\item Controller-Klassen
	\item Business-Logik-Klassen
	\item View-Klassen
\end{itemize}

Optimierung des Entwurfs (Modularisierung, Erweiterbarkeit, Lesbarkeit):

\begin{itemize}
	\item Kopplung optimieren
	\item Kohäsion optimieren
	\item SOLID
	\item Entwurfsmuster einsetzen
\end{itemize}

\newpage
\def \currentAuthor{Kevin Glatz}

\section{Arduino}

Die erfolgreiche Verwendung des Arduino besteht aus zwei  Punkten:
\begin{itemize}
	\item Verkablung der einzelnen Module 
	\item Programmierung
\end{itemize}

Wir können vor allem dem Programmcode um einiges vereinfachen indem wir diesen in drei Unterbereiche aufteilen, wobei jedes Abteil eine fest zugeteilte Aufgabe bekommt. Dasselbe zählt für die Verkablung der einzelnen Module, da diese mit einer strukturierten Farbkodierung übersichtlicher werden.


\subsection{Verkablung}
\begin{figure}[h]
	
	\includegraphics[width=0.7\linewidth]{figures/VerkablungStrukturplan.png}
	\caption{Arduino mit Breadboard}
	\label{fig:verkablungstrukturplan}
\end{figure}

In Abbildung  6.2 können wir nun den Arduino und das Breadboard sehen.  Für eine einfachere Unterscheidung der Kabel verwenden wir ein simples Farbschema. Rot steht für die Stromzufuhr, grün für die Datenauslesung und blau für die Erdung.


Die untersten und obersten zwei Zeilen, lassen den Strom bzw. die Erdung horizontal laufen.  Die Steckplätze darüber leiten hingegen jegliche Information vertikal. Ein wichtiges Detail ist das man Stromzufuhr auf der horizontalen Plus reihe platziert (in der Grafik anhand der roten Linie zu sehen), da ansonsten keine Energie ankommt. Bei den vertikalen Steckplätzen gibt es allerdings keine negativ oder positiv gepolten Spalten.

Worauf man bei der Datenauslesung achten muss, ist das Arduino  zwei Möglichkeiten dafür verwendet. Zum einen gibt es digitale Daten, welche einen Wert von 1 oder 0 besitzten können. Die Alternative dafür sind analoge Daten, die einen Wert von 0 bis 1023 Wahrnehmen können.

Vereinfacht erklärt werden bei digitalen Pins entweder 0 oder 5 Volt gelesen und bei analogen Pins 5 Volt durch 1024 Werte geteilt. Je nachdem wie viel Stromzufuhr das Modul hat, kann es somit einen Datenwert um einiges genauer zurückgeben
\cite{analogRead}




\subsubsection{Bibliotheken importieren und globale Variablen definieren}

In diesem Schritt importieren wir die nötigen Bibliotheken welche aus GitHub oder direkt von Arduino zur verfügung gestellt bekommen. Auch werden alle Variablen die sowohl in den Methoden Setup und Loop verwendet werden erstellt. 

\subsubsection{Setup}

Die Funktion Setup wird verwendet um einmalige Konfigurationen zu tätigen. Dazu zählen unter anderem Aufbau einer Verbindung, Kalibrierung sensibler Controller oder ähnlichen. Die hier getätigten Aktivitäten werden nur ausgeführt wenn der Arduino startet bzw. zurückgesetzt wird.

\subsubsection{Loop}

Diese Methode verarbeitet und gibt all unsere Werte aus. Besonders an der Klasse Loop ist, dass diese dauerhaft wiederholt wird. Es gibt keine maximale Durchlaufmenge und die Geschwindigkeit eines Durchlaufs wird von der Methode \"delay\" in Millisekunden definiert. Mit Hilfe dieser Eigenschaften, können wir zeitnahe alle Daten auslesen. Falls nun ein Wert eine Mindestgrenze kann sofort darauf reagiert werden. 

Eine genauere Beschreibung der einzelnen Module und deren Programmierung erfolgt in den kommenden Seiten.


\chapter{Implementierung}
Detaillierte Beschreibung der Implementierung aller Teilkomponenten der Software entlang der zentralsten Use-Cases:

\begin{itemize}
	\item GUI-Implementierung
	\item Controllerlogik
	\item Geschäftslogik
	\item Datenbankzugriffe
\end{itemize}

Detaillierte Beschreibung der Teststrategie (Testdriven Development):

\begin{itemize}
	\item UNIT-Tests (Funktional)
	\item Integrationstests
\end{itemize}

Zu Codesequenzen:
\begin{itemize}
	\item kurze Codesequenzen direkt im Text (mit Zeilnnummern auf die man in der Beschreibung verweisen kann)
	\item lange Codesequenzen in den Anhang (mit Zeilennummer) und darauf verweisen (wie z.B. hier)
	
	
\end{itemize}

\def \currentAuthor {Florian Tipotsch}

\section{Webapp}

Für unser Projekt erstellen wir eine Webapp mit der man die Daten seiner eigenen Zuchtkammer anzeigen lassen kann.
Wir haben geplant das man sich mit der Seriennummer der Box Registrieren kann und dann am Handy über eine Webapp alle Daten anzeigen lassen kann. Folgende Daten sollte man auslesen können:

\begin{itemize}
	\item Sauerstoff
	\item Luftfeuchtigkeit
	\item Gewicht
	\item Temperatur
	\item Futtermenge
	\item ungefähre Zeit bis zu Reife
\end{itemize}
Als Grundlage für die Website haben wir das Framework Yii2 verwendet. Mehr dazu im Kapitel \nameref{sec:YII2}.

\subsection{Mockups}
\begin{figure}
\includegraphics[height=10cm]{figures/Logedin}
\caption{Mockup unserer Seite wenn man eingeloggt ist}
\end{figure}
Hier sieht man die Ansicht wenn man auf unserer Website Angemeldet ist. Man kann auf seine eigene Zuchtkammer zugreifen indem man auf den Button 'Meine Zuchtkammer' klickt und dort die Daten auslesen.
\newpage
\begin{figure}
\includegraphics[height=10cm]{figures/Meine-Zuchtkammer}
\caption{Mockup der Seite Meine-Zuchtkammer}
\end{figure}
Auf der Seite 'Meine Zuchtkammer' sieht die letzten Daten die die Zuchtkammer wiedergegeben hat. Diese sind in Absteigender Reihenfolge geordnet,dass heißt, dass der letzte Eintrag ganz oben steht.
\newpage
\begin{figure}
\includegraphics[height=10cm]{figures/NotlogedIN}
\caption{Mockup unserer Seite wenn man nicht eingeloggt ist}
\end{figure}
Hier Sieht man die Ansicht wenn man auf unserer Website nicht Angemeldet ist. Man kann über den Button 'Zuchtkammer' mehr über unsere Zuchtkammern herausfinden, weiter kann man über den Button 'Kaufen' seine eigene Zuchtkammer kaufen. Bei Signup kann man sich als neuer Benutzer registrieren, um sich allerdings zu registrieren brauch man zuerst eine Seriennummer die man beim kauf einer Zuchtkammer erhält.
\newpage

\subsection{Datenbankzugriffe}
Unserer Datenbank zugriffe werden von unserem Framework verarbeite, dabei verwendet das Framework CRUD befehle und arbeitet nach dem MVC Muster. Das heißt es gibt ein unterliegendes Modell welches Daten an unseren Controller mitgibt welche wiederum die View erzeugt.

Der gesamte Datenbankzugriff kann mittels Yii2 sehr einfach erstellt werden. Mehr dazu siehe \nameref{sec:gii}

\subsection{Datenübermittlung} \label{sec:daten}

Um die Daten von unsrem Arduino an unsere Datenbank zu senden werden wir in den Brutkasten ein WLAN Modul einbauen und die Daten alle 5-10 Minuten als JSON-Format an unsere REST-Schnittstelle unserer Webapp senden. Hierfür haben wir das WLAN Modul ESP8266 verwendet. Das hat den Vorteil das unsere Daten direkt von unserem Brutkasten an die Datenbank gegeben werden kann.
\newline
Für diese Lösung brauchen wir eine REST Schnittelle in unserer Webapp. Dies kann über YII2 sehr einfach realisiert werden. Yii2 hat eine vor implementierte REST Schnittelle welche man nur noch aktivieren muss. Die Daten werden aus der Modell Klasse ausgelesen und über den Controller an die REST-View weitergeleitet. Die ganze Implementierung sind 5-10 Zeilen Code. Die Code Sequenz sehen sie im Kapitel \nameref{sec:Rest}.

\subsection{Rest Schnittelle} \label{sec:Rest}
\begin{figure}	
\includegraphics{figures/Ordner}
\caption{Abbildung des API Ordners}
\end{figure}
\newline
Hier sieht man die Ordnerstruktur. Wir erstellen im Obersten Verzeichnis einen neuen Ordner namens 'api' um im Web über folgende \newline URL:'www.entomophagie/api/web/v1/datas' auf unsere Restschnittelle Zugreifen können. Dabei müssen wir darauf achten das wir Groß- und Kleinschreibung beachten. Da es sonst passieren kann das wir keine Anzeige bekommen. Um dieses Problem zu lösen ist es am einfachsten alle Ordner in unserem Verzeichnis immer klein zuschreiben.\newline
Weiters Kopieren wir 'web', 'config' und den 'runtime' Ordner aus unserem Front- bzw. Backend Ordner. 
\begin{lstlisting}[caption=Controller Klasse für REST]
<?php

namespace api\modules\v1\controllers;
use yii\rest\ActiveController;

class DataController extends Active Controller
{
	public $modelClass = 'common\models\Data';
}
\end{lstlisting}

Hier sieht man die Controller Klasse. In der Controller Klasse müssen wir den Yii eigenen ActiveController einbinden und die Modell Klasse festlegen welche die Daten ausliest.
\begin{lstlisting}[caption=Module Klasse für REST]
<?php

namespace api\modules\v1;

class Module extends \yii\base\Module
{
public $controllerNamespace = 'api\modules\v1\controllers';

public FUnction init()
{
	parent::init();
}
}
\end{lstlisting}
Hier sieht man die Module Klasse. In der Module Klasse wird unser neuer Rest Controller initialisiert, damit unsere Anwendung diese Verwenden kann. Dort müssen wir unseren Controller den wir zuvor erstellt haben festlegen.
\newline
Wir haben den Rest Controller mit folgendem Online Tutorial erstellt \cite{Restt}.



\newpage
\def \currentAuthor {Kevin Glatz}
\section{Verkablung}

Die tatsächliche Verkablung der einzelnen Module war am Anfang recht komplex. Trotz des richtigen Setups unterliefen Fehler die verhinderten das Daten sinnvoll ausgelesen werden konnten. Verwendung von Widerständen führte zu falschen oder unrealistischen Daten, da der Strom der darüber lief zu gering war bzw. der Widerstand zu hoch. 

\begin{figure}[h]
	\centering
	\includegraphics[width=0.7\linewidth]{figures/allMod}
	\caption{Verkablung aller Module}
	\label{fig:allmod}
\end{figure}

In dieser Grafik kann man die Verkablung aller Module sehen. Abgebildet von links anfangend:

\begin{itemize}
	\item Servomotor SG0
	\item WLAN Modul ESP8266
	\item Joystick Modul (oben)
	\item Lichtempfindlichkeit (unten)
	\item Temperatur und Luftfeuchtigkeitssensor DHT11
	\item CO2 Sensor CCS811
\end{itemize}

Die größte Herausforderung bot der CCS811 sowie der ESP8266, da beide keine typische Verkabelung verwenden. Wie man an der Grafik erkennen kann werden mehrere Strom oder Datenquellen benötigt.



\section{Arduino}
Die Verkablung der einzelnen Module ist aus verschiedenen Gründen wichtig. Zum einen brauch jedes Modul genügend Strom um seine Aufgabe zu erfüllen, gleichzeitig würde es aber ohne die Erdung zu einem Kurzschluss kommen. Des weiteren ist es wichtig das die Module Daten auslesen und weitersenden können
 mit stromfluss einfügen)
 
 \subsection{CCS811}

Der CCS811 benötigt weder digitale noch analoge Werte da er die Pins von der I2C Uhr und Datenlinien verwendet. Des weiteren ist es wichtig anzumerken das dieser Sensor nur mit Mikrocontroller funktioniert die intern I2C "clock streching" unterstützen. In unserem Projekt mussten wir nur die Steckplätze SCL und SDA für den CO2 Sensor verwenden und es funktionierte.

\subsection{ESP8266}

Da der ESP als eingestehende Netzwerkschnittelle zählt braucht diese besonders viel Energie. Daher muss man beim Verkabeln vor allem darauf achten dass beide Stromanschlüsse richtig plaziert wurden. Ähnlich wie das CO2 Messmodul verwendet der WLAN Adapter 2 Datenpins. Diese sind allerdings beide digital und können an beliebigen stellen zwischen 0 und 13 gesetzt werden

\subsection{Joystick Modul}

Der Joystick verwendet ursprünglich zwei analoge Pins und einen Analogen. Damit benötigt dieser Mikrocontroller die meisten Pins. Damit eine variable X und Y Achse ausgelesen werden kann benötigen wir die zwei analogen Pins. Der digitale Wert fungiert als Knopfdruck, dieser kann in unserem Projekt allerdings ignoriert werden. Auf die X Ache können wir hingegen nicht verzichten, da beide Werte benötigt werden um die Position auslesen zu können.


<<<<<<< HEAD
\section{Programmierung}
=======
\subsubsection{Bibliotheken importieren und globale Variablen definieren}
itHub oder direkt von Arduino zur verfügung gestellt bekommen. Auch werden alle Variablen die sowohl in den Methoden Setup und Loop verwendet werden erstellt. 
äten werden nur ausgeführt wenn der Arduino startet bzw. zurückgesetzt wird.
en definiert. Mit Hilfe dieser Eigenschaften, können wir zeitnahe alle Daten auslesen. Falls nun ein Wert eine Mindestgrenze kann sofort darauf reagiert werden. 
kt kann der Quellcode in drei Bereiche eingeteilt werden. 
>>>>>>> 3e06afbabfa374741d0d74fa5cbde2bc3cc60033


\subsection{DHT11 \& CCS811}

Für den DHT 11 sowie dem CCS811 gibt es eine von Adafruit frei verwendbare Bibliothek. Mithilfe von dieser kann man ein Objekt erstellen und es mithilfe diesem Objektes die Momentane Temperatur/Luftfeuchtigkeit auslesen.



Der Parameter \#include fügt externe Klassen in unser Projekt ein und erlaubt es uns in das Objekt dht sowie ccs zu erstellen.
Des weitere können wir mit dem Parameter \#define relevante Daten festlegen. Ein solches Beispiel ist von welchem Pin Daten empfangen werden.


\begin{lstlisting}[language=C, caption=Datenauslesung CCS811, label=code:CCS811read]

delay(2000);
if(ccs.available()){
	if(!ccs.readData()){
		Serial.print("CO2: ");
		Serial.println(ccs.geteCO2());
	}
	else{
		Serial.println("ERROR!");
		//while(1);
	}
}
\end{lstlisting}

\cite{CCS811man}



Die Loop Funktion, wiederholt sich im vorgegebenen Rhythmus immer wieder und gibt keine Variablen zurück. Dort werden alle Daten ausgelesen und an das WLAN Modul weitergeschickt bzw. in diesem Fall wird es auf den Serial Monitor ausgegeben.

Die WENN abfrage prüft als erstes ob der CO2 Sensor kalibriert wurde oder nicht. Falls es gelungen sein sollte gibt es die Werte mit dem Befehl Serial.println(ccs.geteCO2()); im Serial Monitor aus.

\subsection{Hebel}

Das Joystick bzw. der Hebel konnte direkt abgelesen werden. Wichtig hierbei ist es das man nicht nur eine Achse im Setup verwendet sondern beide, ansonsten kommt es bei dem Loop zu einem Fehler und der Wert der benötigten Achse verändert sich nicht.


\subsection{SG90}

Die vom verwendeten Bibliotheken waren bei der Installierung der Arduino eigenen IDE direkt dabei. Die Servo kontrolliert die Luftzufuhr und muss daher Werte vom CCS811 wiederverwenden

\begin{lstlisting}[language=C, caption=Automatisierten Servobewegung bei zu niedrigen CO2 Werten, label=code:SG90]

if(ccs.geteCO2() <= co2Min){
	//move the micro servo from 0 degrees to 180 degrees
	for(;servoAngle < 180; servoAngle++) {       
		servo.write(servoAngle);              
		delay(10);
	} 
} if (ccs.geteCO2() > co2Min && servoAngle != 0){
	servo.write(45); 
	servoAngle = 0;
	Serial.println("RETURN");
}
\end{lstlisting}
\cite{SG90tut}

Die If Abfrage prüft ob CO2 einen Mindestwert (co2Min) unterschreitet. Falls das passiert  wird eine Schleife ausgeführt die den Servo 180° dreht. Diese 180° würde die Lüftungsklappe aufhalten. Falls der CO2 Wert wieder in einem akzeptablen Bereich liegt und die Position des Motors nicht null beträgt, wird die zweite Schleife aktiviert die den Motor zur Position 0 zurückbringt 

\newpage
\def \currentAuthor {Florian Tipotsch}
\newpage
\subsection{Wlan}
Für die Implementierung der Wlan anbiendung haben wir ein ESP8266 verwendet. Das Modul ist sehr einfach einzurichten das ganze haben wir mit den Beispielen von den ESP8266 in der Arduino IDE gemacht.

\subsubsection{ESP8266}
Das Wlan Modul ESP866 wird verwendet um die Verbindung mit dem Internet aufzubauen und die Daten mithilfe der Rest Schnittelle an unsere Website senden. Dafür haben wir die ESP8266 Library von Arduino verwendet.\cite{esp8266}
\begin{lstlisting}[caption=Verbindungsaufbau des ESP8266]
	#include <ESP8266.h>
	
	const char* ssid = "SSID des Benutzers";
	const char* password = "password des Benutzers";
	
	const char* host = "Unsere Website";
	
	void setup(){
	Serial.begin(115200);
	dela(10);
	
	Serial.println();
	Serial.println();
	Serial.println("Connecting to ");
	Serial.println(ssid);
	
	
	WiFi.mode(WIFI_STA);
	WiFi.begin(ssid,password);
	}
\end{lstlisting}

Hier sieht man den Verbindungsaufbau des ESP8266. In der Zeile WIFI.begin wird dann die Verbindung gestarted vorher übergeben wir die SSID und das Password des WLAN womit das Modul sich verbinden soll.
\newpage
\begin{lstlisting}[caption=Verbindungsaufbau Response]
	while(WiFi.status() != WL_CONNECTED) {
	delay(500);
	Serial.print(".");
	}
	
	Serial.println("");
	Serial.println("WiFi connected");
	Serial.println("IP adress: ");
	Serial.println(WiFi.localIP());
	
	


\end{lstlisting}

Bei erfolgreicher Verbindung wird die IP Adresse unseres Moduls ausgegeben.

\begin{lstlisting}[caption=Ausführung der REST Befehle]
client.print(String("GET ) + url + " HTTP/1.1\r\n)" +
	"Host: " + host + "\r\n" + 
	"Connection: close\r\n\r\n");
unsigned long timeout = millis();
while(millis() - timeout > 5000) {
	Serial.println(">>> Client Timeout !");
	client.stop();
	return;
}
\end{lstlisting}
Anschließend können wir in unserer Loop REST Befehle wie Get, Post, Put, etc ausführen.




\chapter{Deployment}
\begin{itemize}
	\item Umsetzung der Ausführungsumgebung
	\item Deployment
	\item DevOps-Thema
\end{itemize}


\newpage
\chapter{Betriebswirtschaftlicher Kontext}


\def \currentAuthor {Kevin Glatz}
\subsection{Arduino in der Wirtschaft}
Mikrocontroller gewinnen vor allem beim Endverbraucher immer mehr an Qualität, allerdings wird auch im Landwirtschaftlichen Bereich von diesen Technologien Gebrauch gemacht. In dem Artikel \"Arduino Projekte in der Landwirtschaft und Fischzucht\" wird beschrieben wie Privatpersonen ihre eigene Lösung zu Problemen wie Fischzucht, Lenksysteme für Erntemaschinen und weitere Fälle gestalten. 
\cite{ArdAgra}

Für einen Insekten Zuchtkasten existiert in der westlichen Welt keine große Nachfrage, im Asiatischen Raum könnte ein solches Produkt hingegen große Popularität gewinnen. In der Kostenrechnung werden die einzelnen Teile nochmals genauer besprochen, allerdings ist der Anschaffungswert alle benötigten Teile unter € 100. 

\subsection{Kostenrechnung}

Die Kostenrechnung ist ein mächtiges Werkzeug die mehrere wichtige Aufgabenbereiche deckt. Dazu zählen unter anderem Grundlagen der Preisbildung, Verwendung als Entscheidungsinstrument oder auch als Planungsinstrument. Grundlage für die gängigen Kostenrechnungsarten besteht aus der Ist-Kostenrechnung, diese listet alle tatsächlich angefallenen Kosten eines Produktes oder einer Periode auf. \cite{KORE}

Die gesamten Kosten unseres Projekt beträgt wie folgend beschrieben. Die tatsächlichen Ausgaben sind allerdings um einiges geringer, da wir ein Teil der Module schon besetzt habe oder von der Schule zur verfügung gestellt bekommen haben.


	\centering
\newline
\caption{Kostenrechnung}
\label{KORE}
\begin{tabular}{lll}
	Fichten	Leimholzplatte						 & € 8,97 		                  \\
	Plexiglas                   				 & € 10,99                        \\
	Arduino Uno							    	 & € 25,94                        \\
	Lochrasterleiterplatte		                 & € 2,65                   	  \\
	40-Piece Jumper Wire 						 & € 6,49						  \\
	Adafruit CCS811 Air Quality Sensor     		 & € 22,98                        \\
	DHT11 Digital Humidity Temperature Sensor    & € 4,99                         \\
	ESP8266 WLAN/WiFi Module		             & € 6,29                         \\
	Servo Micro 9g SG90 						 & € 11,70   					  \\
	Joystick Dual Axis Module                    & € 3,99                  		  \\
	Raspberry Pi 896 8860 3 Model B  			 & € 31,95					      \\
	SanDisk Ultra 16 GB SDHC          			 & € 10,99                        \\
																				  \\
	Summe										 & € 147,94						  \\
\end{tabular}
\end{table}


\newpage
\def \currentAuthor {Florian Tipotsch}
\section{Nutzen einer Website}
Es ist immer wichtiger für Unternehmen eine Website zu besitzen den für viele Personen ist das Internet der erste Ansprechpartner um Informationen zu erhalten. Dabei ist es wichtig das man die gewünschte Website schnell und einfach findet. Dafür ist eine gute Search engine optimation(SEO) wichtig, damit die Website in Google auf der Ersten Seite angezeigt wird. Das ist deshalb wichtig da die zweite Ergebnis Seite von Google oft ignoriert wird.

Auch in unserem Projekt haben wir eine Website erstellt, diese ist allerdings eine Reine Funktionswebsite. Deshalb kann man auf unserer Website erst nur Daten seines Brutkasten auslesen. Man könnte die Website noch mit einem Webshop erweitern, da dies allerdings den Rahmen des Projektes sprengen würde haben wir dies nicht gemacht.

Auf Websiten ist es auch wichtig dass das Unternehmen widergespiegelt wird, deshalb sollte man dort möglichst ein Corporate Design anwenden falls eines vorhanden ist. Den in der heutigen Modernen Zeit ist es für viele der Erste Eindruck über ein Unternehmen.

\chapter{Zusammenfassung}
\begin{itemize}
	\item Etwas längere Form des Abstracts
	\item Detaillierte Beschreibung des Outputs der Arbeit
\end{itemize}